<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Startup Page</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
/* Root and theme colors */
body {
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: #111;
    color: #ddd;
    transition: background 0.3s, color 0.3s;
    -webkit-user-select: none;
    -webkit-touch-callout: none;
}
body.light {
    background: #eee;
    color: #222;
}
main {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
    text-align: center;
    padding: 1rem;
}
h2 {
    margin-top: 1em;
    font-weight: normal;
}
button {
    cursor: pointer;
    padding: 0.5em 1em;
    margin: 0.2em;
    border: none;
    background: #444;
    color: #fff;
    border-radius: 4px;
    transition: background 0.2s;
}
body.light button {
    background: #ccc;
    color: #333;
}
button:hover {
    background: #666;
}
body.light button:hover {
    background: #aaa;
}
input, select {
    padding: 0.5em;
    margin: 0.2em;
    font-size: 1em;
    border: 1px solid #444;
    border-radius: 4px;
    background: #222;
    color: #fff;
    transition: background 0.3s, border-color 0.3s;
}
body.light input, body.light select {
    background: #fff;
    color: #000;
    border: 1px solid #ccc;
}
input:focus, select:focus {
    outline: none;
    border-color: #29a;
    box-shadow: 0 0 3px rgba(41, 128, 185, 0.5);
}
#search-form input {
    width: 60vw;
    max-width: 400px;
}
#search-form button {
    background: #29a; 
}
body.light #search-form button {
    background: #48a;
    color: #fff;
}
#tools-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-bottom: 1em;
}
.tool {
    position: relative;
    width: 60px;
    height: 60px;
    margin: 0.5em;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    cursor: pointer;
    transition: transform 0.2s;
}
.tool:hover {
    transform: translateY(-5px);
}
.tool img {
    width: 32px;
    height: 32px;
    margin-bottom: 0.2em;
}
.tool .label {
    font-size: 0.8em;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
}
.tool .remove {
    position: absolute;
    top: 0;
    right: 5px;
    font-size: 1em;
    color: #f88;
    display: none;
}
.tool:hover .remove {
    display: block;
}
/* Sidebar styles */
#sidebar {
    position: fixed;
    top: 0;
    left: -250px;
    width: 240px;
    height: 100%;
    background: #222;
    color: #fff;
    padding: 1em;
    box-sizing: border-box;
    transition: left 0.3s;
    z-index: 1000;
}
#sidebar.open {
    left: 0;
}
body.light #sidebar {
    background: #ddd;
    color: #000;
}
#menu-btn {
    position: fixed;
    top: 10px;
    left: 10px;
    font-size: 1.5em;
    background: none;
    border: none;
    color: inherit;
    z-index: 1001;
}
#sidebar label {
    display: flex;
    align-items: center;
    margin: 0.5em 0;
    font-size: 0.9em;
}
#sidebar label input {
    margin-left: 0.5em;
}
footer {
    margin-top: 2em;
    font-size: 0.8em;
}
.hidden {
    display: none;
}
/* Sidebar tools list */
#sidebar-tools .tool {
    width: 100%;
    padding: 0.5em 0;
    display: flex;
    align-items: center;
    border-bottom: 1px solid #444;
}
body.light #sidebar-tools .tool {
    border-color: #aaa;
}
#sidebar-tools .tool img {
    width: 16px;
    height: 16px;
    margin-right: 0.5em;
}
#sidebar-tools .tool .label {
    flex-grow: 1;
    text-align: left;
}
#sidebar-tools .tool .remove {
    position: static;
    margin-left: 0.5em;
    font-size: 1.2em;
    color: #f88;
    display: inline-block;
}
#sidebar-tools .tool:hover {
    background: rgba(255,255,255,0.05);
}
/* Fallback for missing favicon */
.tool img[src=""] {
    background: #666;
    border-radius: 4px;
}
#sidebar-tools .tool img[src=""] {
    background: #666;
}
</style>
</head>
<body>
    <button id="menu-btn">☰</button>
    <nav id="sidebar">
        <h2>Settings</h2>
        <label>Light Mode:
            <input type="checkbox" id="toggle-theme">
        </label>
        <label>Show Tools on Home:
            <input type="checkbox" id="toggle-tools" checked>
        </label>
        <button id="reset-tools">Reset Tools</button>
        <h2>Search Engines</h2>
        <button id="add-search-engine">Add Engine</button>
        <h2>Tools</h2>
        <div id="sidebar-tools"></div>
        <button id="add-tool">Add Tool</button>
    </nav>
    <main>
        <div id="tools-container"></div>
        <form id="search-form">
            <select id="search-engine"></select>
            <input type="search" id="search-input" placeholder="Search..." autocomplete="off">
            <button type="submit">Go</button>
        </form>
        <footer>© 2023 Ujwal. All rights reserved.</footer>
    </main>
<script>
// Default lists
const defaultTools = [
    {name: "Google", url: "https://www.google.com"},
    {name: "YouTube", url: "https://www.youtube.com"},
    {name: "Wikipedia", url: "https://en.wikipedia.org"},
    {name: "GitHub", url: "https://github.com"},
    {name: "Reddit", url: "https://www.reddit.com"},
    {name: "Amazon", url: "https://www.amazon.com"}
];
const defaultSearchEngines = [
    {id: "duckduckgo", name: "DuckDuckGo", url: "https://duckduckgo.com/?q="},
    {id: "google", name: "Google", url: "https://www.google.com/search?q="},
    {id: "bing", name: "Bing", url: "https://www.bing.com/search?q="},
    {id: "yahoo", name: "Yahoo", url: "https://search.yahoo.com/search?p="}
];
let tools = [], searchEngines = [], selectedEngineId = null;

// Load settings on startup
function loadSettings() {
    // Theme
    const savedTheme = localStorage.getItem("theme") || "dark";
    document.body.classList.toggle("light", savedTheme === "light");
    document.getElementById("toggle-theme").checked = (savedTheme === "light");
    // Tools toggle
    const toolsOnMain = localStorage.getItem("toolsOnHomepage");
    if (toolsOnMain === null) {
        localStorage.setItem("toolsOnHomepage", "true");
        document.getElementById("toggle-tools").checked = true;
    } else {
        document.getElementById("toggle-tools").checked = (toolsOnMain === "true");
    }
    // Tools list
    const toolsData = localStorage.getItem("tools");
    if (toolsData) {
        tools = JSON.parse(toolsData);
    } else {
        tools = defaultTools.slice();
        localStorage.setItem("tools", JSON.stringify(tools));
    }
    // Search engines list
    const seData = localStorage.getItem("searchEngines");
    if (seData) {
        searchEngines = JSON.parse(seData);
    } else {
        searchEngines = defaultSearchEngines.map(e => ({...e}));
        localStorage.setItem("searchEngines", JSON.stringify(searchEngines));
    }
    // Selected search engine
    const savedEngine = localStorage.getItem("searchEngine");
    selectedEngineId = savedEngine ? savedEngine : searchEngines[0].id;
    // Populate engine selector
    const select = document.getElementById("search-engine");
    select.innerHTML = "";
    searchEngines.forEach(engine => {
        const opt = document.createElement("option");
        opt.value = engine.id;
        opt.textContent = engine.name;
        select.appendChild(opt);
    });
    select.value = selectedEngineId;
}
// Save helpers
function saveTools() {
    localStorage.setItem("tools", JSON.stringify(tools));
}
function saveSearchEngines() {
    localStorage.setItem("searchEngines", JSON.stringify(searchEngines));
}
// Render tools on main
function renderTools() {
    const container = document.getElementById("tools-container");
    container.innerHTML = "";
    tools.forEach((tool, index) => {
        const div = document.createElement("div");
        div.className = "tool";
        div.dataset.index = index;
        const img = document.createElement("img");
        img.alt = tool.name;
        if (tool.iconData) {
            img.src = tool.iconData;
        } else {
            const domain = new URL(tool.url).hostname;
            fetch(`https://www.google.com/s2/favicons?domain=${domain}&sz=64`)
            .then(resp => resp.blob())
            .then(blob => {
                const reader = new FileReader();
                reader.onload = () => {
                    tool.iconData = reader.result;
                    localStorage.setItem("tools", JSON.stringify(tools));
                    img.src = reader.result;
                };
                reader.readAsDataURL(blob);
            }).catch(()=>{
                img.src = "";
            });
        }
        div.appendChild(img);
        const label = document.createElement("div");
        label.className = "label";
        label.textContent = tool.name;
        div.appendChild(label);
        const rem = document.createElement("div");
        rem.className = "remove";
        rem.textContent = "×";
        rem.onclick = (e) => {
            e.stopPropagation();
            tools.splice(index, 1);
            saveTools();
            renderTools();
        };
        div.appendChild(rem);
        div.onclick = () => {
            window.open(tool.url, "_blank");
        };
        container.appendChild(div);
    });
    renderSidebarTools();
}
// Render tools in sidebar list
function renderSidebarTools() {
    const container = document.getElementById("sidebar-tools");
    container.innerHTML = "";
    tools.forEach((tool, index) => {
        const div = document.createElement("div");
        div.className = "tool";
        div.dataset.index = index;
        const img = document.createElement("img");
        img.alt = tool.name;
        if (tool.iconData) {
            img.src = tool.iconData;
        } else {
            const domain = new URL(tool.url).hostname;
            fetch(`https://www.google.com/s2/favicons?domain=${domain}`)
            .then(resp => resp.blob())
            .then(blob => {
                const reader = new FileReader();
                reader.onload = () => {
                    tool.iconData = reader.result;
                    localStorage.setItem("tools", JSON.stringify(tools));
                    img.src = reader.result;
                };
                reader.readAsDataURL(blob);
            }).catch(()=>{
                img.src = "";
            });
        }
        div.appendChild(img);
        const label = document.createElement("div");
        label.className = "label";
        label.textContent = tool.name;
        div.appendChild(label);
        const rem = document.createElement("div");
        rem.className = "remove";
        rem.textContent = "×";
        rem.onclick = (e) => {
            e.stopPropagation();
            tools.splice(index, 1);
            saveTools();
            renderTools();
        };
        div.appendChild(rem);
        div.onclick = () => {
            window.open(tool.url, "_blank");
        };
        container.appendChild(div);
    });
}
// Update tools display location
function updateToolsDisplay() {
    const show = document.getElementById("toggle-tools").checked;
    const mainTools = document.getElementById("tools-container");
    const sidebarTools = document.getElementById("sidebar-tools");
    if (show) {
        mainTools.classList.remove("hidden");
        sidebarTools.classList.add("hidden");
    } else {
        mainTools.classList.add("hidden");
        sidebarTools.classList.remove("hidden");
    }
    localStorage.setItem("toolsOnHomepage", show ? "true" : "false");
}
// Initialize
loadSettings();
renderTools();
updateToolsDisplay();
// Theme toggle event
document.getElementById("toggle-theme").addEventListener("change", () => {
    const isLight = document.getElementById("toggle-theme").checked;
    document.body.classList.toggle("light", isLight);
    document.body.classList.toggle("dark", !isLight);
    localStorage.setItem("theme", isLight ? "light" : "dark");
});
// Tools location toggle
document.getElementById("toggle-tools").addEventListener("change", () => {
    updateToolsDisplay();
});
// Reset tools
document.getElementById("reset-tools").onclick = () => {
    if (confirm("Reset tools to default?")) {
        tools = defaultTools.slice();
        localStorage.setItem("tools", JSON.stringify(tools));
        renderTools();
    }
};
// Add new search engine
document.getElementById("add-search-engine").addEventListener("click", () => {
    const name = prompt("Search Engine Name:");
    if (!name) return;
    let url = prompt("Search URL (use {query} as placeholder):", "https://www.example.com/search?q={query}");
    if (!url) return;
    const id = name.toLowerCase().replace(/\s+/g, '');
    searchEngines.push({id: id, name: name, url: url.replace('{query}','')});
    saveSearchEngines();
    const opt = document.createElement("option");
    opt.value = id;
    opt.textContent = name;
    document.getElementById("search-engine").appendChild(opt);
});
// Add new tool
document.getElementById("add-tool").addEventListener("click", () => {
    const name = prompt("Tool name:");
    if (!name) return;
    const url = prompt("Tool URL (https://...):");
    if (!url) return;
    tools.push({name: name, url: url});
    saveTools();
    renderTools();
});
// Search form submission
document.getElementById("search-form").addEventListener("submit", (e) => {
    e.preventDefault();
    const query = document.getElementById("search-input").value.trim();
    if (!query) return;
    const engineId = document.getElementById("search-engine").value;
    const engine = searchEngines.find(e=>e.id === engineId);
    if (!engine) return;
    const url = engine.url + encodeURIComponent(query);
    window.location.href = url;
    localStorage.setItem("searchEngine", engineId);
});
// Sidebar toggle button
document.getElementById("menu-btn").onclick = () => {
    document.getElementById("sidebar").classList.toggle("open");
};
// Disable context menu globally
document.addEventListener("contextmenu", e => e.preventDefault());
</script>
</body>
</html>
